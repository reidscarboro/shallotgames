<!DOCTYPE HTML>
<!--
	Stellar by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Shallot Games</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../assets/css/main.css" />
		<link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
		<noscript><link rel="stylesheet" href="../assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">
					<header id="header" class="alt">
						<span class="logo"><img src="../images/shallotLogo.svg" alt="" /></span>
					</header>

					<div id="main">
						<div class="spotlight">
							<div class="content" style="padding:50px">
								<header class="major">
									<h2><b>Reset Coffee Golf Password</span></b></h2>
									<input name="password" type="password" placeholder="New Password..."/>
									<br/>
									<input name="passwordConfirm" type="password" placeholder="Confirm New Password..."/>
									<br/>
									<button style="min-width:40%; height: 50pt" onclick="submit();">SUBMIT</button>
								</header>
							</div>
						</div>
					</div>

				<!-- Footer -->
					<footer id="footer">
						<section>
							<h2>About Us</h2>
							<p>Shallot Games is a mobile game development studio located in Florida, United States. We strive to create fun and polished experiences, and enjoy hanging out with our community in our <b><a href="https://discord.gg/shallotgames">Discord</a></b>. Come stop by, we'd love to say hi!</p>
						</section>
						<section>
							<h2>Contact</h2>
							<dl class="alt">
								<dt>Email</dt>
								<dd><a href="mailto:support@shallotgames.com">hello@shallotgames.com</a></dd>
							</dl>
							<ul class="icons">
								<li><a href="https://discord.gg/shallotgames" class="icon brands fa-discord alt"><span class="label">Discord</span></a></li>
								<li><a href="https://twitter.com/shallotgames" class="icon brands fa-twitter alt"><span class="label">Twitter</span></a></li>
								<li><a href="https://facebook.com/shallotgames" class="icon brands fa-facebook-f alt"><span class="label">Facebook</span></a></li>
								<li><a href="https://instagram.com/shallotgames" class="icon brands fa-instagram alt"><span class="label">Instagram</span></a></li>
							</ul>
						</section>
						<p class="copyright">&copy; 2020 Shallot Games</p>
					</footer>

			</div>

		<!-- Scripts -->
			<script>
			    const queryString = window.location.search;
			    const urlParams = new URLSearchParams(queryString);
			    const resetPasswordCode = urlParams.get('resetpasswordcode');

			    function submit()
			    {
			    	var password = document.getElementsByName("password")[0].value;
			    	var passwordConfirm = document.getElementsByName("passwordConfirm")[0].value;

			    	if (!/^(?=.*[a-z])(?=.*\d)[a-zA-Z\d\w\W]{8,}$/.test(password))
		    		{
						alert("Password must contain at least 8 characters, one letter, and one number");
		    		}
			    	else if (password !== passwordConfirm)
		    		{
		    			alert("Passwords must match!");
		    		}
		    		else
	    			{
	    				var resetRequest = new Object();
	    				resetRequest.ResetPasswordCode = resetPasswordCode;
	    				resetRequest.Password = password;

					    $.ajax({
					        url: 'https://mocha-8362e0de17b0.herokuapp.com/resetpassword',
					        type: 'post',
					        data: { resetRequest: JSON.stringify(resetRequest) },
					        success: function(){
					        	window.location.href = "resetpasswordsuccess.html";
					       },
					       error: function(){
					       		window.location.href = "resetpassworderror.html";
					       }
					   });
	    			}
			    }
			</script>
			<script src="../assets/js/jquery.min.js"></script>
			<script src="../assets/js/jquery.scrollex.min.js"></script>
			<script src="../assets/js/jquery.scrolly.min.js"></script>
			<script src="../assets/js/browser.min.js"></script>
			<script src="../assets/js/breakpoints.min.js"></script>
			<script src="../assets/js/util.js"></script>
			<script src="../assets/js/main.js"></script>

	</body>
</html>
